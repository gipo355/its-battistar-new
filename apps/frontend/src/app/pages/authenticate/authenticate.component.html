<div class="flex min-h-screen items-center justify-center bg-gray-100">
    <div class="w-full max-w-md space-y-6 rounded-lg bg-white p-8 shadow-md">
        <div *ngIf="isLoginForm" class="space-y-4">
            <h2 class="text-center text-2xl font-bold">Login</h2>
            <form
                [formGroup]="loginForm"
                (ngSubmit)="onSubmitLoginForm()"
                class="space-y-4"
            >
                <div>
                    <label
                        for="login-username"
                        class="block text-sm font-medium text-gray-700"
                        >Username:</label
                    >
                    <input
                        type="text"
                        id="login-username"
                        formControlName="username"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            loginForm.get('username')?.invalid &&
                            loginForm.get('username')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Username is required.
                    </div>
                </div>
                <div>
                    <label
                        for="login-password"
                        class="block text-sm font-medium text-gray-700"
                        >Password:</label
                    >
                    <input
                        type="password"
                        id="login-password"
                        formControlName="password"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            loginForm.get('password')?.invalid &&
                            loginForm.get('password')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Password is required.
                    </div>
                </div>
                <button
                    type="submit"
                    class="w-full rounded-md bg-blue-500 px-4 py-2 text-white disabled:bg-gray-500"
                    [disabled]="
                        authService.isLoading() || authService.isAuthenticated()
                    "
                >
                    Login
                </button>
            </form>
            <button
                (click)="toggleForms()"
                class="w-full px-4 py-2 text-blue-500"
            >
                Don't have an account? Register
            </button>
        </div>
        <div *ngIf="!isLoginForm" class="space-y-4">
            <h2 class="text-center text-2xl font-bold">Register</h2>
            <form
                [formGroup]="registerForm"
                (ngSubmit)="onSubmitRegisterForm()"
                class="space-y-4"
            >
                <div>
                    <label
                        for="register-firstName"
                        class="block text-sm font-medium text-gray-700"
                        >First Name:</label
                    >
                    <input
                        type="text"
                        id="register-firstName"
                        formControlName="firstName"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('firstName')?.invalid &&
                            registerForm.get('firstName')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        First Name is required and must be at least 2
                        characters.
                    </div>
                </div>
                <div>
                    <label
                        for="register-lastName"
                        class="block text-sm font-medium text-gray-700"
                        >Last Name:</label
                    >
                    <input
                        type="text"
                        id="register-lastName"
                        formControlName="lastName"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('lastName')?.invalid &&
                            registerForm.get('lastName')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Last Name is required and must be at least 2 characters.
                    </div>
                </div>
                <div>
                    <label
                        for="register-picture"
                        class="block text-sm font-medium text-gray-700"
                        >Picture:</label
                    >
                    <input
                        type="text"
                        id="register-picture"
                        formControlName="picture"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('picture')?.invalid &&
                            registerForm.get('picture')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Picture URL is required and must be valid.
                    </div>
                </div>
                <div>
                    <label
                        for="register-username"
                        class="block text-sm font-medium text-gray-700"
                        >Username:</label
                    >
                    <input
                        type="text"
                        id="register-username"
                        formControlName="username"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('username')?.invalid &&
                            registerForm.get('username')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Username is required and must be ASCII and min 3 chars.
                    </div>
                </div>
                <div>
                    <label
                        for="register-password"
                        class="block text-sm font-medium text-gray-700"
                        >Password:</label
                    >
                    <input
                        type="password"
                        id="register-password"
                        formControlName="password"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('password')?.invalid &&
                            registerForm.get('password')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Password is required and must be strong (8 chars, must
                        contain a number, a lowercase letter, an uppercase
                        letter, and a special character between
                        !&commat;#$%^&*).
                    </div>
                </div>
                <div>
                    <label
                        for="register-confirmPassword"
                        class="mt-2 block text-sm font-medium text-gray-700"
                        >Confirm Password:</label
                    >
                    <input
                        type="password"
                        id="register-confirmPassword"
                        formControlName="confirmPassword"
                        required
                        class="w-full rounded-md border px-3 py-2"
                    />
                    <div
                        *ngIf="
                            registerForm.get('confirmPassword')?.invalid &&
                            registerForm.get('confirmPassword')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Confirm Password is required.
                    </div>
                    <div
                        *ngIf="
                            registerForm.errors?.['passwordMismatch'] &&
                            registerForm.get('confirmPassword')?.touched
                        "
                        class="text-sm text-red-500"
                    >
                        Passwords do not match.
                    </div>
                </div>
                <button
                    type="submit"
                    class="w-full rounded-md bg-blue-500 px-4 py-2 text-white disabled:bg-gray-500"
                    [disabled]="
                        authService.isLoading() || authService.isAuthenticated()
                    "
                    [style.cursor]="
                        registerForm.invalid ? 'not-allowed' : 'pointer'
                    "
                >
                    Register
                </button>
            </form>
            <button
                (click)="toggleForms()"
                class="w-full px-4 py-2 text-blue-500"
            >
                Already have an account? Login
            </button>
        </div>
    </div>
</div>
